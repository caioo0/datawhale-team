# chapter06 数据仓库Hive

## 6.0 数据仓库

### 6.0.1 为什么要有数据仓库

在引入数据仓库之前，我们先来聊聊为什么回产生数据仓库？

![](https://gitee.com/shenhao-stu/Big-Data/raw/master/doc_imgs/ch6.0.1.png)

数据的作用有两个：**操作型记录的保存**和**分析型决策的制定**

- 操作型记录的保存意味着企业通常不必维护历史数据，只需要修改数据以反映最新的状态；
- 分析型决策意味着企业需要保存历史的数据，从而可以更精准的来评估现有状况进行决策；

基于后者分析型决策的优化，需要高性能地完成用户的查询，因此引出了数据仓库的概念。

### 6.0.2 数据仓库概念

数据仓库是一个**面向主题、集成的、非易失的、随时间变化的、用来支持管理人员决策**的数据集合，数据仓库中包含了粒度化的企业数据。

数据仓库的主要特征是： **主题性** 、 **集成性** 、 **非易失性** 、 **时变性** 。

![](https://gitee.com/shenhao-stu/Big-Data/raw/master/doc_imgs/ch6.0.2_1.png)

### 6.0.3 数据仓库的体系结构

数据仓库的体系结构通常包含4个层次：**数据源、数据存储和管理、数据服务以及数据应用**。

![](https://gitee.com/shenhao-stu/Big-Data/raw/master/doc_imgs/ch6.0.3.png)

* **数据源：** 数据仓库的数据来源，包括外部数据、现有业务系统和文档资料等。
* **数据存储和管理：** 为数据提供的存储和管理，包括数据仓库、数据集市、数据仓库监视、运行与维护工具和元数据管理等。
* **数据服务：** 为前端工具和应用提供数据服务，包括直接从数据仓库中获取数据提供给前端使用，或者通过`OLAP`服务器为前端应用提供更为复杂的数据服务。
* **数据应用：** 直接面向最终用户，包括数据工具、自由报表工具、数据分析工具、数据挖掘工具和各类应用系统。

### 6.0.4 面临的挑战

随着大数据时代的全面到来，传统数据仓库也面临了如下挑战：

- 无法满足快速增长的海量数据存储需求
- 无法有效处理不同类型的数据
- 计算和处理能力不足

## 6.1 Hive基本概念

Hive 是基于Hadoop的一个数据仓库工具。**它可以将结构化的数据文件映射为一个数据库表**，并提供完整的SQL查询功能，可以将SQL语句转换为MapReduce任务进行运行。

特点：学习成本低，可以通过类SQL语句快速实现简单的MapReduce统计。

Hive定义了简单的类SQL查询语言，称为HiveQL,Hive 的命令行接口关系数据库的命令行接 但是 Hive 关系数据库还是有很大
的不同，主要体现在以下几点：

- Hive 和关系数据库存储文件的系统不同。Hive使用的是Hadoop的HDFS,关系数据库使用的则是服务器本地的文件系统。
- Hive 使用的计算模型是MapReduce,而关系数据库使用的则是自己设计的计算模型。
- 关系数据库都是实时查询的业务进行设计的，而Hive则是为海量数据做数据挖掘设计的。Hive的实时性很差，实时性的差别导致Hive的应用场景和关系数据库有很大的不同。
- Hive 很容易扩展自己的存储能力和计算能力，这是继承了Hadoop的特性，而关系数据库在这方面要与Hive 逊色很多。

![](https://gitee.com/shenhao-stu/Big-Data/raw/master/doc_imgs/ch6.1.png)
